function filterTags(e){e=parseInt(e.find(":selected").attr("value"));e&&$.ajax({type:"GET",url:"/Item/GetThemeTags",data:{id:e},dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){$("#checkboxes label").hide();for(var t=0;t<e.length;t++)$("#tag-input-id-"+e[t]).parent().show()},error:function(){alert("Error occured!!")}})}function filterProjects(e){e=parseInt(e.find(":selected").attr("value"));e&&$.ajax({type:"GET",url:"/Item/GetTeamProjects",data:{id:e},dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){$("#project-selector option").hide();for(var t=0;t<e.length;t++)$("#project-selector option[value="+e[t]+"]").show()},error:function(){alert("Error occured!!")}})}$(document).ready(function(){$(":checkbox").change(function(){$(this).is(":checked")?$(this).attr("checked",!0):$(this).attr("checked",!1)}),filterTags($("#theme-selector")),filterProjects($("#team-selector")),$("#theme-selector").change(function(){filterTags($(this))}),$("#team-selector").change(function(){filterProjects($(this))})});var expanded=!1;function showCheckboxes(){var e;0==$("#tag-selector select").prop("disabled")&&(e=document.getElementById("checkboxes"),expanded=expanded?!(e.style.display="none"):(e.style.display="block",!0))}function addKeyInsightField(e){var t=$(e).parent().find(".key-insight-field").length;const a=$(e).parent();a.append(`<div class="key-insight-field row">
                        <div class="col-12">
                            <label for="KeyInsightsList_${t}_">KeyInsightsList[${t}]</label>
                        </div>
                        <div class="col-10" data-children-count="1">
                            <input class="form-control" type="text" id="KeyInsightsList_${t}_" name="KeyInsightsList[${t}]" value="">
                            <span class="text-danger field-validation-valid" data-valmsg-for="KeyInsightsList[${t}]" data-valmsg-replace="true"></span>
                        </div>
                        <div class="col-2"><button onclick="removeField(this, 'keyInsight')">Delete</button></div>
                    </div>`)}function addSuggestedTagField(e){var t=$(e).parent().find(".suggested-tag-field").length;const a=$(e).parent();a.append(`<div class="suggested-tag-field row">
                                <div class="col-12">
                                    <label for="SuggestedTagList_${t}_">SuggestedTagList[${t}]</label>
                                </div>
                                <div class="col-10" data-children-count="1">
                                    <input class="form-control" type="text" id="SuggestedTagList_${t}_" name="SuggestedTagList[${t}]" value="">
                                    <span class="text-danger field-validation-valid" data-valmsg-for="SuggestedTagList[${t}]" data-valmsg-replace="true"></span>
                                </div>
                                <div class="col-2"><button onclick="removeField(this, 'suggestedTag')">Delete</button></div>
                            </div>`),0==t&&(e.innerHTML="Suggest another tag")}function showField(e,t){$("#"+t).show(),$(e).hide()}function removeField(e,t){console.log("thing"),$(e).parent().parent().remove(),"suggestedTag"==t&&0==$(".suggested-tag-field").length&&$("#add-suggested-tag-button").html("Suggest a tag")}function hideField(e,t){$("#"+e+" input").val(""),$("#"+e).hide(),$("#"+t).show()}function handleFiles(e){for(var t=e.files,a=new FormData,n=0;n<t.length;n++)a.append(t[n].name,t[n]);$.ajax({url:"/Item/PostFiles",cache:!1,contentType:!1,processData:!1,data:a,type:"post",success:function(e){var t=$("#file-names").val()+e;if($("#file-names").val(t),e){let t=e.split(",");t.pop();let a="";for(let e=0;e<t.length;e++){var n="/Item/GetDownloadedFile/?filePath=\\files\\documents\\items\\temp\\"+t[e];a+=`<div class="file"><a href="${n}"><h2>${t[e]}</h2></a><button onclick="removeFile(this)">Delete</button><br><br></div>`}$("#files-list").append(a)}},error:function(e){console.log(e),alert("An error occurred!!!")}})}function removeFile(e){const t=$(e).parent().find("h2").first().text();$.ajax({url:"/Item/DeleteFiles",contentType:"application/json; charset=utf-8",data:{name:t},type:"GET",cache:!1,success:function(){var e=$("#file-names").val().replace(t+",","");$("#file-names").val(e),console.log($("#file-names").val())},error:function(e){console.log(e),alert("An error occurred!!!")}}),$(e).parent().remove()}function getTeams(){let i=[];return $(".team").each(function(e,t){let a=[];const n=$(t).find(".team-id").first().val();var o=$(t).find(".team-name").first().val();$(t).find(".project").each(function(e,t){t={Id:$(t).find(".project-id").first().val(),Name:$(t).find(".project-name").first().val(),TeamId:n};a.push(t)});o={Id:n,Name:o,Projects:a};i.push(o)}),i}function saveTempTeams(e,n){e=JSON.stringify(e);$.ajax({type:"POST",url:"/Team/SaveTeamsState",traditional:!0,data:e,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var a=$("#project-teamId-modal-input");$("#project-teamId-modal-input option:gt(0)").remove();for(let e=0;e<t.length;e++)a.append($("<option></option>").attr("value",t[e].value).text(t[e].text));$("#project-teamId-modal-input").val(n)},error:function(e){console.log(e),alert("An error occurred!!!")}})}function updateProjects(e){const t=e.closest(".project-modal");var a=t.find("#project-id-modal-input").first().val();const n=t.find("#project-teamId-modal-input").find(":selected").attr("value");var o=t.find("#project-oldTeamId-modal-input").val(),i=t.find("#project-name-modal-input").first().val(),e=e.val();$.ajax({type:"GET",url:"/Project/UpdateProject",data:{id:a,projectName:i,teamId:n,oldTeamId:o,actionName:e},contentType:"application/json; charset=utf-8",success:function(e){updateTeamProjects(n)},error:function(e){console.log(e),alert("An error occurred!!!")}})}function updateTeamProjects(){window.location.replace("../team?redirect=True")}function openProjectModal(e){$("#project-delete-button").show().prop("disabled",!1),$("#project-submit-button").val("Update");var t=$(e).siblings(".project-name").first().val(),a=$(e).siblings(".project-id").first().val(),n=$(e).closest(".team").find(".team-id").first().val();$(e).siblings("#project-oldTeamId-modal-input").first().val();$("#project-name-modal-input").attr("value",t),$("#project-id-modal-input").attr("value",a),$("#project-teamId-modal-input").val(n),$("#project-oldTeamId-modal-input").val(n),$("#myProjectModal").show(),saveTempTeams(getTeams(),n),event.preventDefault()}function openAddProjectModal(e){console.log("kk"),$("#project-delete-button").hide().prop("disabled",!0),$("#project-submit-button").val("Add");var t=$(e).closest(".team").find(".team-id").first().val();$(e).siblings("#project-oldTeamId-modal-input").first().val();$("#project-teamId-modal-input").val(t),$("#project-oldTeamId-modal-input").val(t),$("#project-id-modal-input").attr("value",0),$("#project-name-modal-input").attr("value",""),$("#myProjectModal").show(),saveTempTeams(getTeams(),t)}function getThemes(){let n=[];return $(".theme").each(function(e,t){let o=[],i=[];var a={Id:$(t).find(".theme-id").first().val(),Name:$(t).find(".theme-name").first().val(),Image:""};$(t).find(".tag-checkbox").each(function(e,t){var a=$(t).find(".tag-checkbox-id").first().val(),n=$(t).find(".tag-checkbox-name").first().val(),t={Value:a,Name:n,CheckedState:$(t).find(".tag-checkbox-state").first().is(":checked")};o.push(t);a={Text:n,Value:a};i.push(a)});a={Theme:a,TagCheckboxes:o,TagSelectList:i};n.push(a)}),console.log(n),n}function saveTempThemes(e){e=JSON.stringify(e);$.ajax({type:"POST",url:"/Theme/SaveThemesState",traditional:!0,data:e,contentType:"application/json; charset=utf-8",dataType:"json"})}function populateTagNameField(e){let t=parseInt(e.find(":selected").attr("value"));"newTag"==t&&(t=null),$.ajax({type:"GET",url:"/Tag/GetTagName",data:{id:t},contentType:"application/json; charset=utf-8",success:function(e){"newTag"==e?($("#tag-name-input").val(""),$("#tag-submit-button").val("Add"),$("#tag-delete-button").hide(),$("#tag-delete-button").prop("disabled",!0)):($("#tag-name-input").val(e),$("#tag-submit-button").val("Update"),$("#tag-delete-button").show(),$("#tag-delete-button").prop("disabled",!1)),$("#tag-name-input").show(),$("#tag-submit-button").show(),$("#tag-submit-button").prop("disabled",!1)},error:function(e){console.log(e),alert("An error occurred!!!")}})}function updateTags(e){let t=e.closest(".modal-content").find("#tag-select-dropdown").first().find(":selected").attr("value");t="newTag"==t?0:parseInt(t);var a=e.closest(".modal-content").find("#tag-name-input").first().val(),e=e.val();$("#tag-select-dropdown").val(0),$("#tag-name-input").val(""),$.ajax({type:"GET",url:"/Tag/UpdateTag",data:{id:t,tagName:a,actionName:e},contentType:"application/json; charset=utf-8",success:function(t){var a=$("#tag-select-dropdown");$("#tag-select-dropdown option:gt(1)").remove();for(let e=0;e<t.length;e++)a.append($("<option></option>").attr("value",t[e].id).text(t[e].name))},error:function(e){console.log(e),alert("An error occurred!!!")}})}function updateThemeTags(){window.location.replace("../theme?redirect=True")}$(document).ready(function(){$("#file-upload-box").change(function(){handleFiles(this)}),$("#team-selector").change(function(){0!=$(this).val&&$("#project-selector").prop("disabled",!1)}),$("#theme-selector").change(function(){0!=$(this).val&&$("#tag-selector select").prop("disabled",!1)})}),$(document).ready(function(){$(".projectModalClose").click(function(){$("#myProjectModal").hide()}),$(".project-modal-btn").click(function(){updateProjects($(this))}),$(document).mouseup(function(e){const t=$("#myProjectModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("#project-name-input").val(""))})}),$(document).ready(function(){const e=JSON.stringify({searchText:searchText="*",teams:teams=["*"],projects:projects=["*"],tags:tags=["item 10"],startDate:startDate="*",endDate:endDate="*"});$("#filters input:not(#text-search), #filters select").change(function(){alert("Handler for .change() called.")}),$("#filters #text-search").keypress(function(){$.ajax({type:"GET",url:"/Item/GetFilteredItems",data:{itemQueryJson:e},success:function(e){console.log(e)},error:function(){alert("Error occured!!")}})})}),$(document).ready(function(){$("#myTagBtn").click(function(){event.preventDefault(),$("#tag-name-input").hide(),$("#tag-delete-button").hide(),$("#tag-submit-button").hide(),$("#tag-delete-button").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),$("#myTagModal").show(),saveTempThemes(getThemes())}),$(".tagModalClose").click(function(){$("#myTagModal").hide(),$("#tag-name-input").val(""),$("#tag-name-input").hide(),$("#tag-select-dropdown").val(0),$("#tag-delete-button").hide(),$("#tag-submit-button").hide(),$("#tag-delete-button").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),updateThemeTags()}),$(document).mouseup(function(e){const t=$("#myTagModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("#tag-name-input").val(""),$("#tag-name-input").hide(),$("#tag-select-dropdown").val(0),$("#tag-delete-button").hide(),$("#tag-submit-button").hide(),$("#tag-delete-button").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),updateThemeTags())}),$("#tag-select-dropdown").change(function(){populateTagNameField($(this))}),$(".tag-modal-btn").click(function(){updateTags($(this))})});