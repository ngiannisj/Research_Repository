function filterTags(t){t=parseInt(t.find(":selected").attr("value"));t&&$.ajax({type:"GET",url:"/Item/GetThemeTags",data:{id:t},dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){$("#checkboxes label").hide();for(var e=0;e<t.length;e++)$("#tag-input-id-"+t[e]).parent().show()},error:function(){alert("Error occured!!")}})}function filterProjects(t){t=parseInt(t.find(":selected").attr("value"));t&&$.ajax({type:"GET",url:"/Item/GetTeamProjects",data:{id:t},dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){$("#project-selector option").hide();for(var e=0;e<t.length;e++)$("#project-selector option[value="+t[e]+"]").show()},error:function(){alert("Error occured!!")}})}$(document).ready(function(){$(":checkbox").change(function(){$(this).is(":checked")?$(this).attr("checked",!0):$(this).attr("checked",!1)}),filterTags($("#theme-selector")),filterProjects($("#team-selector")),$("#theme-selector").change(function(){filterTags($(this))}),$("#team-selector").change(function(){filterProjects($(this))})});var expanded=!1;function showCheckboxes(){var t=document.getElementById("checkboxes");expanded=expanded?!(t.style.display="none"):(t.style.display="block",!0)}function getTeams(){let i=[];return $(".team").each(function(t,e){let a=[];const o=$(e).find(".team-id").first().val();var n=$(e).find(".team-name").first().val();$(e).find(".project").each(function(t,e){e={Id:$(e).find(".project-id").first().val(),Name:$(e).find(".project-name").first().val(),TeamId:o};a.push(e)});n={Id:o,Name:n,Projects:a};i.push(n)}),i}function saveTempTeams(t,o){t=JSON.stringify(t);$.ajax({type:"POST",url:"/Team/SaveTeamsState",traditional:!0,data:t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){var a=$("#project-teamId-modal-input");$("#project-teamId-modal-input option:gt(0)").remove();for(let t=0;t<e.length;t++)a.append($("<option></option>").attr("value",e[t].value).text(e[t].text));$("#project-teamId-modal-input").val(o)},error:function(t){console.log(t),alert("An error occurred!!!")}})}function updateProjects(t){const e=t.closest(".project-modal");var a=e.find("#project-id-modal-input").first().val();const o=e.find("#project-teamId-modal-input").find(":selected").attr("value");var n=e.find("#project-oldTeamId-modal-input").val(),i=e.find("#project-name-modal-input").first().val(),t=t.val();$.ajax({type:"GET",url:"/Project/UpdateProject",data:{id:a,projectName:i,teamId:o,oldTeamId:n,actionName:t},contentType:"application/json; charset=utf-8",success:function(t){updateTeamProjects(o)},error:function(t){console.log(t),alert("An error occurred!!!")}})}function updateTeamProjects(){window.location.replace("../team?redirect=True")}function openProjectModal(t){$("#project-delete-button").show().prop("disabled",!1),$("#project-submit-button").val("Update");var e=$(t).siblings(".project-name").first().val(),a=$(t).siblings(".project-id").first().val(),o=$(t).closest(".team").find(".team-id").first().val();$(t).siblings("#project-oldTeamId-modal-input").first().val();$("#project-name-modal-input").attr("value",e),$("#project-id-modal-input").attr("value",a),$("#project-teamId-modal-input").val(o),$("#project-oldTeamId-modal-input").val(o),$("#myProjectModal").show(),saveTempTeams(getTeams(),o),event.preventDefault()}function openAddProjectModal(t){console.log("kk"),$("#project-delete-button").hide().prop("disabled",!0),$("#project-submit-button").val("Add");var e=$(t).closest(".team").find(".team-id").first().val();$(t).siblings("#project-oldTeamId-modal-input").first().val();$("#project-teamId-modal-input").val(e),$("#project-oldTeamId-modal-input").val(e),$("#project-id-modal-input").attr("value",0),$("#project-name-modal-input").attr("value",""),$("#myProjectModal").show(),saveTempTeams(getTeams(),e)}function getThemes(){let o=[];return $(".theme").each(function(t,e){let n=[],i=[];var a={Id:$(e).find(".theme-id").first().val(),Name:$(e).find(".theme-name").first().val(),Image:""};$(e).find(".tag-checkbox").each(function(t,e){var a=$(e).find(".tag-checkbox-id").first().val(),o=$(e).find(".tag-checkbox-name").first().val(),e={Value:a,Name:o,CheckedState:$(e).find(".tag-checkbox-state").first().is(":checked")};n.push(e);a={Text:o,Value:a};i.push(a)});a={Theme:a,TagCheckboxes:n,TagSelectList:i};o.push(a)}),console.log(o),o}function saveTempThemes(t){t=JSON.stringify(t);$.ajax({type:"POST",url:"/Theme/SaveThemesState",traditional:!0,data:t,contentType:"application/json; charset=utf-8",dataType:"json"})}function populateTagNameField(t){let e=parseInt(t.find(":selected").attr("value"));"newTag"==e&&(e=null),$.ajax({type:"GET",url:"/Tag/GetTagName",data:{id:e},contentType:"application/json; charset=utf-8",success:function(t){"newTag"==t?($("#tag-name-input").val(""),$("#tag-submit-button").val("Add"),$("#tag-delete-button").hide(),$("#tag-delete-button").prop("disabled",!0)):($("#tag-name-input").val(t),$("#tag-submit-button").val("Update"),$("#tag-delete-button").show(),$("#tag-delete-button").prop("disabled",!1)),$("#tag-name-input").show(),$("#tag-submit-button").show(),$("#tag-submit-button").prop("disabled",!1)},error:function(t){console.log(t),alert("An error occurred!!!")}})}function updateTags(t){let e=t.closest(".modal-content").find("#tag-select-dropdown").first().find(":selected").attr("value");e="newTag"==e?0:parseInt(e);var a=t.closest(".modal-content").find("#tag-name-input").first().val(),t=t.val();$("#tag-select-dropdown").val(0),$("#tag-name-input").val(""),$.ajax({type:"GET",url:"/Tag/UpdateTag",data:{id:e,tagName:a,actionName:t},contentType:"application/json; charset=utf-8",success:function(e){var a=$("#tag-select-dropdown");$("#tag-select-dropdown option:gt(1)").remove();for(let t=0;t<e.length;t++)a.append($("<option></option>").attr("value",e[t].id).text(e[t].name))},error:function(t){console.log(t),alert("An error occurred!!!")}})}function updateThemeTags(){window.location.replace("../theme?redirect=True")}$(document).ready(function(){$(".projectModalClose").click(function(){$("#myProjectModal").hide()}),$(".project-modal-btn").click(function(){updateProjects($(this))}),$(document).mouseup(function(t){const e=$("#myProjectModal");e.is(":visible")&&e.is(t.target)&&0===e.has(t.target).length&&(e.hide(),$("#project-name-input").val(""))})}),$(document).ready(function(){const t=JSON.stringify({searchText:searchText="*",teams:teams=["*"],projects:projects=["*"],tags:tags=["item 10"],startDate:startDate="*",endDate:endDate="*"});$("#filters input:not(#text-search), #filters select").change(function(){alert("Handler for .change() called.")}),$("#filters #text-search").keypress(function(){$.ajax({type:"GET",url:"/Item/GetFilteredItems",data:{itemQueryJson:t},success:function(t){console.log(t)},error:function(){alert("Error occured!!")}})})}),$(document).ready(function(){$("#myTagBtn").click(function(){event.preventDefault(),$("#tag-name-input").hide(),$("#tag-delete-button").hide(),$("#tag-submit-button").hide(),$("#tag-delete-button").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),$("#myTagModal").show(),saveTempThemes(getThemes())}),$(".tagModalClose").click(function(){$("#myTagModal").hide(),$("#tag-name-input").val(""),$("#tag-name-input").hide(),$("#tag-select-dropdown").val(0),$("#tag-delete-button").hide(),$("#tag-submit-button").hide(),$("#tag-delete-button").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),updateThemeTags()}),$(document).mouseup(function(t){const e=$("#myTagModal");e.is(":visible")&&e.is(t.target)&&0===e.has(t.target).length&&(e.hide(),$("#tag-name-input").val(""),$("#tag-name-input").hide(),$("#tag-select-dropdown").val(0),$("#tag-delete-button").hide(),$("#tag-submit-button").hide(),$("#tag-delete-button").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),updateThemeTags())}),$("#tag-select-dropdown").change(function(){populateTagNameField($(this))}),$(".tag-modal-btn").click(function(){updateTags($(this))})});