function showItemDeleteModal(e){$("#deleteItemModal").show();e=e.value;$("#delete-item-modal-button").val(e),event.preventDefault(),$("body").addClass("no-scroll"),findInsiders($("#deleteItemModal"))}function filterTags(e){e=[parseInt(e.find(":selected").attr("value"))];$.ajax({type:"GET",url:"/Item/GetThemeTags",data:{ids:e},dataType:"json",cache:!1,traditional:!0,success:function(e){if(e){$("#checkboxes label").hide();for(var t=0;t<e.length;t++)$("#tag-input-id-"+e[t]).parent().show()}},error:function(){console.log(error)}})}function filterProjects(e){e=[parseInt(e.find(":selected").attr("value"))];$.ajax({type:"GET",url:"/Item/GetTeamProjects",data:{ids:e},dataType:"json",cache:!1,traditional:!0,success:function(e){if(e){$("#project-selector option:not(:first)").hide();for(var t=0;t<e.length;t++)$("#project-selector option[value="+e[t]+"]").show()}},error:function(e){console.log(e)}})}$(document).ready(function(){$(".open-delete-team-modal-btn").click(function(){$("#deleteTeamModal").show();var e=$(this).val();$("#delete-team-confirm-btn").val(e),$("body").addClass("no-scroll"),findInsiders($("#deleteTeamModal")),event.preventDefault()}),$("#close-delete-team-modal-button, .teamModalClose").click(function(){$("#deleteTeamModal").hide(),event.preventDefault(),$("body").removeClass("no-scroll")}),$(document).mouseup(function(e){const t=$("#deleteTeamModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("body").removeClass("no-scroll"))}),$("#open-project-delete-modal-btn").click(function(){$("#myProjectModal").hide(),$("#deleteProjectModal").show(),event.preventDefault(),$("body").addClass("no-scroll"),findInsiders($("#deleteProjectModal"))}),$("#close-delete-project-modal-button, .projectModalClose").click(function(){$("#deleteProjectModal").hide(),$("#myProjectModal").show(),event.preventDefault(),$("body").removeClass("no-scroll")}),$(document).mouseup(function(e){const t=$("#deleteProjectModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("body").removeClass("no-scroll"))}),$(".open-delete-theme-modal-btn").click(function(){$("#deleteThemeModal").show();var e=$(this).val();$("#delete-theme-confirm-btn").val(e),event.preventDefault(),$("body").addClass("no-scroll"),findInsiders($("#deleteThemeModal"))}),$("#close-delete-theme-modal-button, .themeModalClose").click(function(){$("#deleteThemeModal").hide(),event.preventDefault(),$("body").removeClass("no-scroll")}),$(document).mouseup(function(e){const t=$("#deleteThemeModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("body").removeClass("no-scroll"))}),$("#open-delete-tag-modal-btn").click(function(){$("#myTagModal").hide(),$("#deleteTagModal").show(),event.preventDefault(),$("body").addClass("no-scroll")}),$("#close-delete-tag-modal-button, .tagModalClose, #tag-delete-button").click(function(){$("#deleteTagModal").hide(),$("#myTagModal").show(),event.preventDefault(),$("body").removeClass("no-scroll"),findInsiders($("#deleteTagModal"))}),$(document).mouseup(function(e){const t=$("#deleteTagModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("body").removeClass("no-scroll"))}),$("#open-delete-item-modal-btn").click(function(){showItemDeleteModal(this)}),$("#close-delete-item-modal-button, .itemModalClose").click(function(){$("#deleteItemModal").hide(),event.preventDefault(),$("body").removeClass("no-scroll")}),$("#delete-item-modal-button").click(function(){var e=$(this).val();$.ajax({type:"GET",url:"/Item/Delete",data:{id:e},contentType:"application/json; charset=utf-8",success:function(){window.location.href="../profile"}})}),$(document).mouseup(function(e){const t=$("#deleteItemModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("body").removeClass("no-scroll"))})}),$(document).ready(function(){$(":checkbox").change(function(){$(this).is(":checked")?($(this).attr("checked",!0),$(this).parent().addClass("field__label--checkbox-checked")):($(this).attr("checked",!1),$(this).parent().removeClass("field__label--checkbox-checked"))}),$("#filters").length&&filterTags($("#theme-selector")),$("#filters").length&&filterProjects($("#team-selector")),$("#theme-selector").change(function(){filterTags($(this))}),$("#team-selector").change(function(){filterProjects($(this))})});var expanded=!1;function showCheckboxes(){var e;0==$("#tag-selector select").prop("disabled")&&(e=document.getElementById("checkboxes"),expanded=expanded?!(e.style.display="none"):(e.style.display="block",!0))}function selectListOptionClick(e){$(e).closest(".accordion__container--select-list").find(".accordion__button--select-list").first().attr("data-selected",$(e).data("value")),$(e).closest(".accordion__container--select-list").find(".accordion__button--select-list").first().html($(e).text()),$(e).closest(".accordion__container").find(".select-list-input").first().val($(e).data("value")),event.preventDefault()}function selectListButtonClick(){event.preventDefault()}function highlightSelectedHeaderNavLink(){window.location.href.toLowerCase().includes("item/upsert")?$("#contribute-nav-link").addClass("header__nav-link--active"):window.location.href.toLowerCase().includes("item")&&!window.location.href.toLowerCase().includes("itemrequest")&&!window.location.href.toLowerCase().includes("account")||window.location.href.toLowerCase().includes("item?filterType")?$("#library-nav-link").addClass("header__nav-link--active"):window.location.href.toLowerCase().includes("itemrequest")||window.location.href.toLowerCase().includes("theme")||window.location.href.toLowerCase().includes("team")||window.location.href.toLowerCase().includes("account")?($("#librarian-nav-link").addClass("header__nav-link--active"),$("#login-nav-link").addClass("header__nav-link--active")):(window.location.href.toLowerCase().includes("profile")?$("#profile-nav-link"):$("#home-nav-link")).addClass("header__nav-link--active")}function highlightSelectedSidebarNavLink(){window.location.href.toLowerCase().includes("itemrequest")?$("#item-request-nav-link").addClass("sidebar-nav__nav-link--active"):window.location.href.toLowerCase().includes("theme")?$("#theme-nav-link").addClass("sidebar-nav__nav-link--active"):window.location.href.toLowerCase().includes("team")?$("#team-nav-link").addClass("sidebar-nav__nav-link--active"):window.location.href.toLowerCase().includes("account")&&$("#create-librarian-nav-link").addClass("sidebar-nav__nav-link--active")}function findInsiders(t){let e=t.find("select, input, textarea, button, a").filter(":visible"),a=e.first(),i=e.last();a.focus(),i.on("keydown",function(e){9!==e.which||e.shiftKey||(e.preventDefault(),a.focus())}),a.on("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),i.focus())}),t.on("keyup",function(e){27===e.keyCode&&t.hide()})}function addKeyInsightField(e){var t=$(e).parent().find(".key-insight-field").length;const a=$(e).parent();a.append(`<div class="key-insight-field row">
                        <div class="col-12">
                            <label for="KeyInsightsList_${t}_">KeyInsightsList[${t}]</label>
                        </div>
                        <div class="col-10" data-children-count="1">
                            <input class="form-control" type="text" id="KeyInsightsList_${t}_" name="KeyInsightsList[${t}]" value="">
                            <span class="text-danger field-validation-valid" data-valmsg-for="KeyInsightsList[${t}]" data-valmsg-replace="true"></span>
                        </div>
                        <div class="col-2"><button onclick="removeField(this, 'keyInsight')">Delete</button></div>
                    </div>`),event.preventDefault()}function addSuggestedTagField(e){var t=$(e).parent().find(".suggested-tag-field").length;const a=$(e).parent();a.append(`<div class="suggested-tag-field row">
                                <div class="col-12">
                                    <label for="SuggestedTagList_${t}_">SuggestedTagList[${t}]</label>
                                </div>
                                <div class="col-10" data-children-count="1">
                                    <input class="form-control" type="text" id="SuggestedTagList_${t}_" name="SuggestedTagList[${t}]" value="">
                                    <span class="text-danger field-validation-valid" data-valmsg-for="SuggestedTagList[${t}]" data-valmsg-replace="true"></span>
                                </div>
                                <div class="col-2"><button onclick="removeField(this, 'suggestedTag')">Delete</button></div>
                            </div>`),0==t&&(e.innerHTML="Suggest another tag"),event.preventDefault()}function showField(e,t){$("#"+t).show(),$(e).hide(),event.preventDefault()}function hideField(e,t){$("#"+e+" input").val(""),$("#"+e).hide(),$("#"+t).show(),event.preventDefault()}function removeField(e,t){$(e).parent().parent().remove(),"suggestedTag"==t&&0==$(".suggested-tag-field").length&&$("#add-suggested-tag-button").html("Suggest a tag"),event.preventDefault()}function handleFiles(e){let a=[];a=e.files;let i=[];if(0<a.length){const n=["pdf","doc","docx","jpg","png","ppt"];for(let e=0;e<=a.length-1;e++){let t=a[e].name.split(".").pop().toLowerCase();if(!n.filter(e=>e.includes(t)).length)return void alert(`File ${a[e].name} is not the correct type, files must have an extension of .pdf/.doc/.jpg/.png/.ppt only.`);if(4096<=Math.round(a[e].size/1024))return void alert(`File ${a[e].name} is too Big, please select a file less than 4mb`);i.push(a[e])}}var t=new FormData;for(let e=0;e<i.length;e++)t.append(i[e].name,i[e]);$.ajax({url:"/Item/PostFiles",cache:!1,contentType:!1,processData:!1,data:t,type:"post",success:function(e){var t=$("#file-names").val()+e;if($("#file-names").val(t),e){let t=e.split(",");t.pop();let a="";for(let e=0;e<t.length;e++){var i="/Item/GetDownloadedFile/?filePath=\\files\\documents\\items\\temp\\"+t[e];a+=`<div class="file"><a href="${i}"><h2>${t[e]}</h2></a><button onclick="removeFile(this)">Delete</button><br><br></div>`}$("#files-list").append(a)}},error:function(e){console.log(e)}}),event.preventDefault()}function removeFile(e){const t=$(e).parent().find("h2").first().text();$.ajax({url:"/Item/DeleteFiles",contentType:"application/json; charset=utf-8",data:{name:t},type:"GET",cache:!1,success:function(){var e=$("#file-names").val().replace(t+",","");$("#file-names").val(e)},error:function(e){console.log(e)}}),$(e).parent().remove(),event.preventDefault()}function getTeams(){let s=[];return $(".team").each(function(e,t){let a=[];const i=$(t).find(".team-id").first().val();var n=$(t).find(".team-name-input").first().val(),o=$(t).find(".team-contact-input").first().val();$(t).find(".project").each(function(e,t){t={Id:$(t).find(".project-id").first().val(),Name:$(t).find(".project-name-input").first().val(),TeamId:i};a.push(t)});o={Id:i,Name:n,Contact:o,Projects:a};s.push(o)}),s}function saveTempTeams(e,i){e=JSON.stringify(e);$.ajax({type:"POST",url:"/Team/SaveTeamsState",traditional:!0,data:e,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var a=$("#project-teamId-modal-input");$("#project-teamId-modal-input option:gt(0)").remove();for(let e=0;e<t.length;e++)a.append($("<option></option>").attr("value",t[e].value).text(t[e].text));$("#project-teamId-modal-input").val(i)},error:function(e){console.log(e)}})}function updateProjects(e){var t=$("#project-id-modal-input").first().val();const a=$("#project-teamId-modal-input").val();var i=$("#project-oldTeamId-modal-input").val(),n=$("#project-name-modal-input").first().val(),e=e.val();$.ajax({type:"GET",url:"/Project/UpdateProject",data:{id:t,projectName:n,teamId:a,oldTeamId:i,actionName:e},contentType:"application/json; charset=utf-8",success:function(){updateTeamProjects(a)},error:function(e){console.log(e)}})}function updateTeamProjects(){window.location.replace("../team?redirect=True")}function openProjectModal(e){$("#project-delete-button").show().prop("disabled",!1),$("#project-submit-button").val("Update");var t=$(e).siblings(".project-name-input").first().val(),a=$(e).siblings(".project-id").first().val(),i=$(e).closest(".team").find(".team-id").first().val(),e=$(e).closest(".team").find(".team-name-input").first().val();$("#project-name-modal-input").attr("value",t),$("#project-id-modal-input").attr("value",a),$("#project-teamId-modal-input").val(i),$("#project-teamId-modal-selectList").html(e),$("#project-oldTeamId-modal-input").val(i),$("body").addClass("no-scroll"),$("#myProjectModal .modal__title").text("Edit a project"),$("#myProjectModal").show(),findInsiders($("#myProjectModal")),saveTempTeams(getTeams(),i),event.preventDefault()}function openAddProjectModal(e){$("body").addClass("no-scroll"),$("#project-delete-button").hide().prop("disabled",!0),$("#project-submit-button").val("Add");e=$(e).closest(".team").find(".team-id").first().val();$("#project-teamId-modal-input").val(e),$("#project-oldTeamId-modal-input").val(e),$("#project-id-modal-input").attr("value",0),$("#project-name-modal-input").attr("value",""),$("#myProjectModal .modal__title").text("Add a project"),$("#myProjectModal").show(),findInsiders($("#myProjectModal")),saveTempTeams(getTeams(),e),event.preventDefault()}function setNotificationValue(){$.ajax({url:"/Item/AddNotificationsToSession",type:"GET",dataType:"json",success:function(e){if(e){let a=[],i=[],n=[];e.forEach(function(e,t){"Draft"==e?a.push(e):"Published"==e?i.push(e):"Rejected"==e&&n.push(e)}),a.length&&($("#profile-draft-notification").html("!"),$("#profile-draft-notification").removeClass("notification-bubble--hidden")),i.length&&($("#profile-published-notification").html("!"),$("#profile-published-notification").removeClass("notification-bubble--hidden")),n.length&&($("#profile-rejected-notification").html("!"),$("#profile-rejected-notification").removeClass("notification-bubble--hidden")),e.length&&($("#item-notification-count").html(e.length),$("#profile-nav-link").addClass("header__nav-link--has-notification"),$("#item-notification-count").removeClass("notification-bubble--hidden"))}},error:function(e,t){}})}function setItemRequestValue(){$.ajax({url:"/Item/AddItemRequestCountToSession",type:"GET",dataType:"json",success:function(e){e&&($("#item-request-count").html(e),$("#item-request-count").removeClass("notification-bubble--hidden"))},error:function(e,t){}})}$(document).ready(function(){$(".homepage-filter").click(function(){var e=$(this).data("type"),t=$(this).data("name");window.location.href=`../item?filterType=${e}&checkedCheckbox=${t}`}),$("#homepage-submit-btn").click(function(){var e=$("#homepage-searchbar").val();window.location.href=`../item?searchText=${e}`,event.preventDefault()}),$("#homepage-search-form").submit(function(){var e=$("#homepage-searchbar").val();window.location.href=`../item?searchText=${e}`,event.preventDefault()})}),$(document).ready(function(){document.querySelectorAll('[role="button"], [role="tab"], [role="link"]').forEach(function(t){t.addEventListener("keydown",function(e){32==e.keyCode&&event.preventDefault(),13!=e.keyCode&&32!=e.keyCode||t.click()})}),$(".accordion__button .button--icon").click(function(){event.stopPropagation()}),$(".accordion__button .button--icon").keydown(function(){event.stopPropagation()}),$(".accordion__button .button--icon").mouseover(function(){$(this).closest(".accordion").addClass("no-hover")}),$(".accordion__button .button--icon").mouseleave(function(){$(this).closest(".accordion").removeClass("no-hover")}),$(".accordion").click(function(){$(this).toggleClass("accordion--active"),$(this).hasClass("accordion--active")?$(this).next(".accordion__content").slideDown():$(this).next(".accordion__content").slideUp()}),$(window).click(function(e){if(!e.target.matches(".accordion__button--select-list")){var t=$(".accordion__button--select-list");let e;for(e=0;e<t.length;e++)$(t[e]).removeClass("accordion--active"),$(t[e]).next(".accordion__content").slideUp()}}),$(".accordion__button").focus(function(){$(this).closest(".accordion__container").addClass("focus")}),$(".accordion__button").blur(function(){$(this).closest(".accordion__container").removeClass("focus")}),$(".link--back").click(function(){window.history.back()})}),$(document).ready(function(){highlightSelectedHeaderNavLink(),highlightSelectedSidebarNavLink()}),$(document).ready(function(){$("#submission-item-button").click(function(){$("#itemSubmissionConfirmModal").show(),event.preventDefault()}),$("#close-submission-confirm-modal-button, submissionConfirmModalClose").click(function(){window.location.href="/profile"}),$(document).mouseup(function(e){const t=$("#itemSubmissionConfirmModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(window.location.href="/profile")}),$("#file-upload-box").change(function(){handleFiles(this)}),null!=$("#theme-selector").val()&&0!=$("#theme-selector").val()&&$("#tag-selector select").prop("disabled",!1),$("#team-selector").val()&&$("#project-selector").prop("disabled",!1),$("#team-selector").change(function(){0!=$(this).val()&&($("#project-selector").prop("selectedIndex",0),$("#project-selector").prop("disabled",!1))}),$("#theme-selector").change(function(){0!=$(this).val()&&$("#tag-selector select").prop("disabled",!1)}),$("#status-selector").change(function(){"Rejected"==$(this).val()?$("#comment-input").show():$("#comment-input").hide()})}),$(document).ready(function(){$("#profile-edit-btn").click(function(){$("#profile-save-btn").show(),$("#user-role-input").show(),$("#user-firstName-input").show(),$("#user-lastName-input").show(),$("#user-email-input").show(),$("#user-team-selector").show(),$("#user-firstName-text").hide(),$("#user-lastName-text").hide(),$("#user-email-text").hide(),$("#user-team-text").hide(),$("#user-role-text").hide(),$(this).hide(),event.preventDefault()}),$(".selected").first().click()}),$(document).ready(function(){$(".project-modal-btn").click(function(){updateProjects($(this))}),$(".projectModalClose").click(function(){$("#myProjectModal").hide(),$("body").removeClass("no-scroll")}),$(document).mouseup(function(e){const t=$("#myProjectModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("#project-name-input").val(""),$("body").removeClass("no-scroll"))})}),$(document).ready(function(){$("#profile-nav-link").length&&setNotificationValue(),$("#item-request-count").length&&setItemRequestValue()});let queryParameters={searchText:searchText="",themes:themes=[],teams:teams=[],projects:projects=[],tags:tags=[],sensitivity:sensitivity=[],approvals:approvals=[],status:status=["Published"],userIds:userIds=[],startDate:startDate="yyyy-mm-dd",endDate:endDate="yyyy-mm-dd",paginationStartItem:paginationStartItem=0};const numOfItemsPerPage=10;function updateFilterParameters(e,t){queryParameters.themes=[],queryParameters.teams=[],queryParameters.projects=[],queryParameters.tags=[],queryParameters.sensitivity=[],queryParameters.approvals=[],queryParameters.searchText="",queryParameters.searchText=$("#text-search").val(),$("#approval-checkbox-filter label:visible input:checked").each(function(e,t){queryParameters.approvals.push($(this).data("name"))}),$("#sensitivity-checkbox-filter label:visible input:checked").each(function(e,t){queryParameters.sensitivity.push($(this).data("name"))}),$("#tag-checkbox-filter label:visible input:checked").each(function(e,t){queryParameters.tags.push($(this).data("name"))}),$("#team-checkbox-filter label:visible input:checked").each(function(e,t){queryParameters.teams.push($(this).data("name"))}),$("#theme-checkbox-filter label:visible input:checked").each(function(e,t){queryParameters.themes.push($(this).data("name"))}),$("#project-checkbox-filter label:visible input:checked").each(function(e,t){queryParameters.projects.push($(this).data("name"))}),$("#start-date-search").length&&(queryParameters.startDate=$("#start-date-search").val()),$("#end-date-search").length&&(queryParameters.endDate=$("#end-date-search").val()),queryParameters.paginationStartItem=e*numOfItemsPerPage,t&&(queryParameters.status=[],queryParameters.status.push(t)),filterItemList(t,e)}function filterItemList(o,s){var e=JSON.stringify(queryParameters);$.ajax({type:"GET",url:"/Item/GetFilteredItems",data:{itemQueryJson:e},success:function(i){console.log(i);let n="";if(i&&0!=i.items.length)for(let a=0;a<i.items.length;a++){if($("#filters.profile-filters").length){let e="";e="Submitted"==i.items[a].status?"yellow":"Published"==i.items[a].status?"green":"Rejected"==i.items[a].status?"red":"blue";let t="";if(i.items[a].tags)for(let e=0;e<i.items[a].tags.length;e++)t+=`
                <div class="pill">
                  <img
                    class="pill__image"
                    src="images/svgs/tag.svg"
                    alt="tag_image"
                  />${i.items[a].tags[e]}
                </div>`;n+=`<a href="/Item/View/${i.items[a].id}" class="card card--pathway ${"blue"!==e?`card--${e}`:""}">
${i.items[a].notifyUploader?'<span class="notification-bubble notification-bubble__item-notification">!</span>':""}
            <div class="card__content">
              <div class="card__heading-container">
                <h4 class="card__heading">${i.items[a].title?`${i.items[a].title}`:"No title"}</h4>
                <h4 class="card__subheading text--transparent-70-base-blue">
                  ${i.items[a].team?`${i.items[a].team}`:""}
                </h4>
              </div>

              <div class="card__description-container">
                <p class="text--black">
                  ${i.items[a].abstract}
                </p>
              </div>
                ${t}
              </div>
            </div>
          </a>`}if($("#filters.librarian-filters").length&&(n+=`<a href="/Item/View/${i.items[a].id}" class="card card--pathway">
            <div class="card__content">
              <div class="card__heading-container">
                <h4 class="card__heading">${i.items[a].title?`${i.items[a].title}`:"No title"}</h4>
              </div>

 <div class="margin-bottom--extra-small"><span class="text--black">Title: </span> <span class="faded">${i.items[a].title}</span></div>
 <div class="margin-bottom--extra-small"><span class="text--black">Contributer: </span> <span class="faded">${i.items[a].uploader}</span></div>
 <div class="margin-bottom--extra-small"><span class="text--black">Last updated: </span> <span class="faded">${i.items[a].lastUpdatedDate.split("T")[0]}</span></div>
            </div>
          </a>`),$("#filters.published-filters").length){let t="";if(i.items[a].tags)for(let e=0;e<i.items[a].tags.length;e++)t+=`
                <div class="pill">
                  <img
                    class="pill__image"
                    src="images/svgs/tag.svg"
                    alt="tag_image"
                  />${i.items[a].tags[e]}
                </div>`;n+=`<a href="/Item/View/${i.items[a].id}" class="card card--pathway">
            <div class="card__content">
              <div class="card__heading-container">
                 <h4 class="card__heading">${i.items[a].title?`${i.items[a].title}`:"No title"}</h4>
                <h4 class="card__subheading text--transparent-70-base-blue">
                  ${i.items[a].team?`${i.items[a].team}`:""}
                </h4>
              </div>

              <div class="card__description-container">
                <p class="text--black">
                  ${i.items[a].abstract}
                </p>
              </div>
                ${t}
              </div>
            </div>
          </a>`}}else n='<div class="no-items"><p>No items to display<p></div>';$("#item-list").html(n);let t="",e=0,a=0;if(a=i.numOfTotalResults<=numOfItemsPerPage?e=0:(e=Math.ceil(i.numOfTotalResults/numOfItemsPerPage),e-2),!(e<2)){if(pageNum=s+1,2<=pageNum?t+=`<li class="pagination__item">
                     <button class="pagination__button" onclick="updateFilterParameters(${s-1}, '${o}')">Previous</button>
                     </li>`:t+=`<li class="pagination__item">
                    <button class="pagination__button" disabled>Previous</button>
                    </li>`,t+=`<li class="pagination__item">
                <button class="pagination__button ${1==pageNum?"pagination__button--active":""}" onclick="updateFilterParameters(0, '${o}')">1</button>
                </li>`,4<=pageNum&&(t+='<li class="pagination__item">...</li>'),1<=a)if(pageNum<=2)for(let e=s;e<=3;e++)0<e&&(t+=`<li class="pagination__item">
                            <button class="pagination__button ${pageNum==e+1?"pagination__button--active":""}"  onclick="updateFilterParameters(${e}, '${o}')">
                            ${e+1}
                            </button>
                            </li>`);else if(pageNum>=e-1)for(let e=a-2;e<=a;e++)t+=`<li class="pagination__item">
                            <button class="pagination__button ${pageNum==e+1?"pagination__button--active":""}" onclick="updateFilterParameters(${e}, '${o}')">
                            ${e+1}
                            </button>
                            </li>`;else for(let e=s-1;e<=s+1;e++)t+=`<li class="pagination__item">
                            <button class="pagination__button ${pageNum==e+1?"pagination__button--active":""}" onclick="updateFilterParameters(${e}, '${o}')">
                            ${e+1}
                            </button>
                            </li>`;pageNum<=e-3&&(t+='<li class="pagination__item">...</li>'),1<=e&&(t+=`<li class="pagination__item">
                    <button class="pagination__button ${pageNum==e?"pagination__button--active":""}" onclick="updateFilterParameters(${e-1}, '${o}')">
                    ${e}
                    </button>
                    </li >`),pageNum<e?t+=`<li class="pagination__item">
                    <button class="pagination__button" onclick="updateFilterParameters(${s+1}, '${o}')">Next</button>
                     </li>`:t+=`<li class="pagination__item">
              <button class="pagination__button" disabled>Next</button>
              </li>`,$("#item-list-pagination").html(t)}},error:function(e){console.log(e)}})}function filterTagsForItemsList(){let a=[];$("#theme-checkbox-filter input:checked").each(function(e,t){$(this).parent().hasClass("field__label--checkbox-checked")||$(this).parent().addClass("field__label--checkbox-checked"),$(this).closest(".accordion__container").find(".accordion").first().hasClass("accordion--active")||($(this).closest(".accordion__container").find(".accordion").first().addClass("accordion--active"),$(this).closest(".accordion__container").find(".accordion").first().next(".accordion__content").slideDown()),a.push($(this).parent().next("input").val())}),$.ajax({type:"GET",url:"/Item/GetThemeTags",data:{ids:a},dataType:"json",cache:!1,traditional:!0,success:function(e){if(void 0!==a&&0<a.length){$("#tag-checkbox-filter label").hide();for(var t=0;t<e.length;t++)$("#tag-input-id-"+e[t]).parent().show()}else $("#tag-checkbox-filter label").show();updateFilterParameters(queryParameters.paginationStartItem,"Published")},error:function(e){console.log(e)}})}function filterProjectsForItemsList(){let a=[];$("#team-checkbox-filter input:checked").each(function(e,t){a.push($(this).parent().next("input").val())}),$("#project-checkbox-filter input:checked").each(function(e,t){$(this).parent().hasClass("field__label--checkbox-checked")||$(this).parent().addClass("field__label--checkbox-checked"),$(this).closest(".accordion__container").find(".accordion").first().hasClass("accordion--active")||($(this).closest(".accordion__container").find(".accordion").first().addClass("accordion--active"),$(this).closest(".accordion__container").find(".accordion").first().next(".accordion__content").slideDown())}),$.ajax({type:"GET",url:"/Item/GetTeamProjects",data:{ids:a},dataType:"json",cache:!1,traditional:!0,success:function(e){if(void 0!==a&&0<a.length){$("#project-checkbox-filter label").hide();for(var t=0;t<e.length;t++)$("#project-input-id-"+e[t]).parent().show()}else $("#project-checkbox-filter label").show();filterTagsForItemsList()},error:function(e){console.log(e)}})}function clearFilters(){queryParameters.searchText=$("#text-search").val(""),$("#filters input:checked").prop("checked",!1),$(".field__label--checkbox").removeClass("field__label--checkbox-checked"),$("#filters label").show(),$("#start-date-search").val(""),$("#end-date-search").val(""),updateFilterParameters(0,"Published")}function getThemes(){let i=[];return $(".theme").each(function(e,t){let n=[],o=[];var a={Id:$(t).find(".theme-id").first().val(),Name:$(t).find(".theme-name-input").first().val(),Description:$(t).find(".theme-description-input").first().val()};$(t).find(".tag-checkbox").each(function(e,t){var a=$(t).find(".tag-checkbox-id").first().val(),i=$(t).find(".tag-checkbox-name").first().val(),t={Value:a,Name:i,CheckedState:$(t).find(".tag-checkbox-state").first().is(":checked")};n.push(t);a={Text:i,Value:a};o.push(a)});a={Theme:a,TagCheckboxes:n,TagSelectList:o};i.push(a)}),i}function saveTempThemes(e){e=JSON.stringify(e);$.ajax({type:"POST",url:"/Theme/SaveThemesState",traditional:!0,data:e,contentType:"application/json; charset=utf-8",dataType:"json"})}function populateTagNameField(e){let t=parseInt(e.find(":selected").attr("value"));"newTag"==t&&(t=null),$.ajax({type:"GET",url:"/Tag/GetTagName",data:{id:t},contentType:"application/json; charset=utf-8",success:function(e){"newTag"==e?($("#tag-name-input").val(""),$("#tag-submit-button").val("Add"),$("#open-delete-tag-modal-btn").hide(),$("#open-delete-tag-modal-btn").prop("disabled",!0)):($("#tag-name-input").val(e),$("#tag-submit-button").val("Update"),$("#open-delete-tag-modal-btn").show(),$("#open-delete-tag-modal-btn").prop("disabled",!1)),$("#tag-name-input").show(),$("#tag-submit-button").show(),$("#tag-submit-button").prop("disabled",!1)},error:function(e){console.log(e)}})}function updateTags(e){let t=$("#tag-select-dropdown").first().find(":selected").attr("value");t="newTag"==t?0:parseInt(t);var a=$("#tag-name-input").first().val(),i=$("#check-all-status").prop("checked"),e=e.val();$("#tag-select-dropdown").val(0),$("#tag-name-input").val(""),$.ajax({type:"GET",url:"/Tag/UpdateTag",data:{id:t,tagName:a,checkAll:i,actionName:e},contentType:"application/json; charset=utf-8",success:function(t){var a=$("#tag-select-dropdown");$("#tag-select-dropdown option:gt(1)").remove();for(let e=0;e<t.length;e++)a.append($("<option></option>").attr("value",t[e].id).text(t[e].name));$("#check-all-status").prop("checked",!1),$("#check-all-status-container").hide(),$("#tag-name-input-container").hide()},error:function(e){console.log(e)}})}function updateThemeTags(){window.location.replace("../theme?redirect=True")}function openEditTeamModal(e){event.preventDefault(),$("#teamModal .modal__title").text("Edit a team"),$(e).closest(".team").addClass("team--selected"),$("#add-team-submit-button").hide(),$("#edit-team-submit-button").show(),$("#selected-team-name-input").val($(e).closest(".team").find(".team-name-input").val()),$("#selected-team-contact-input").val($(e).closest(".team").find(".team-contact-input").val()),$("#teamModal").show(),$("body").addClass("no-scroll")}function openEditThemeModal(e){event.preventDefault(),$("#themeModal .modal__title").text("Edit a theme"),$(e).closest(".theme").addClass("theme--selected"),$("#add-theme-submit-button").hide(),$("#edit-theme-submit-button").show(),$("#selected-theme-name-input").val($(e).closest(".theme").find(".theme-name-input").val()),$("#selected-theme-description-input").val($(e).closest(".theme").find(".theme-description-input").val()),$("#themeModal").show(),$("body").addClass("no-scroll")}$(document).ready(function(){$("#reindex-solr-button").click(function(){event.preventDefault(),$.ajax({type:"GET",url:"/ItemRequest/ReindexItems",success:function(e){e?alert("Reindex succeeded"):alert("Reindex failed")},error:function(e){console.log(e)}})}),$("#filters .filter__button").click(function(){$(".filter__button").removeClass("button--active"),$(this).addClass("button--active")}),$("#filters input:not(#text-search), #filters select").change(function(){queryParameters.paginationStartItem=0,filterProjectsForItemsList()}),$("#filters #text-search, #filters #start-date-search, #filters #end-date-search").keyup(function(){queryParameters.paginationStartItem=0,filterProjectsForItemsList()}),$("#filters.published-filters").length&&filterProjectsForItemsList(),$("#filters.librarian-filters").length&&updateFilterParameters(queryParameters.paginationStartItem,"Submitted"),$("#filters.profile-filters").length&&($("#drafts-filter-btn").addClass("button--active"),$.ajax({type:"GET",url:"/Profile/GetUserId",dataType:"text",success:function(e){queryParameters.userId=[],queryParameters.userId.push(e)},error:function(e){console.log(e)}}),updateFilterParameters(queryParameters.paginationStartItem,"Draft")),$("#clear-filters").click(function(){clearFilters()})}),$(document).ready(function(){$("#myTagBtn").click(function(){$("#tag-name-input").hide(),$("#open-delete-tag-modal-btn").hide(),$("#tag-submit-button").hide(),$("#open-delete-tag-modal-btn").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),$("#myTagModal").show(),saveTempThemes(getThemes()),$("body").addClass("no-scroll"),findInsiders($("#myTagModal")),event.preventDefault()}),$(".tagModalClose").click(function(){$("#myTagModal").hide(),$("#tag-name-input").val(""),$("#tag-name-input").hide(),$("#tag-select-dropdown").val(0),$("#open-delete-tag-modal-btn").hide(),$("#tag-submit-button").hide(),$("#open-delete-tag-modal-btn").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),updateThemeTags(),$("body").removeClass("no-scroll")}),$(document).mouseup(function(e){const t=$("#myTagModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("#tag-name-input").val(""),$("#tag-name-input").hide(),$("#tag-select-dropdown").val(0),$("#open-delete-tag-modal-btn").hide(),$("#tag-submit-button").hide(),$("#open-delete-tag-modal-btn").prop("disabled",!0),$("#tag-submit-button").prop("disabled",!0),updateThemeTags(),$("body").removeClass("no-scroll"))}),$("#tag-select-dropdown").change(function(){populateTagNameField($(this)),$("#check-all-status").prop("checked",!1),$("#check-all-status-container").show(),$("#tag-name-input-container").show()}),$(".tag-modal-btn").click(function(){updateTags($(this))})}),$(document).ready(function(){$("#open-add-team-modal-button").click(function(){$("#teamModal .modal__title").text("Add a team"),$("#add-team-submit-button").show(),$("#edit-team-submit-button").hide(),$("#teamModal").show(),$("#selected-team-name-input").val(""),$("#selected-team-contact-input").val(""),$("body").addClass("no-scroll"),findInsiders($("#teamModal")),event.preventDefault()}),$("#edit-team-submit-button").click(function(){$(".team--selected .team-name-text").html($("#selected-team-name-input").val()),$(".team--selected .team-name-input").val($("#selected-team-name-input").val()),$(".team--selected .team-contact-input").val($("#selected-team-contact-input").val()),$("#selected-team-name-input").val(""),$("#selected-team-contact-input").val(""),$(".team--selected").removeClass("team--selected"),$("#teamModal").hide(),$("body").removeClass("no-scroll"),event.preventDefault()}),$("#close-add-team-modal-button, .teamModalClose").click(function(){$("#teamModal").hide(),$("#selected-team-name-input").val(""),$("#selected-team-contact-input").val(""),$(".team--selected").removeClass("team--selected"),$("body").removeClass("no-scroll"),event.preventDefault()}),$(document).mouseup(function(e){const t=$("#teamModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("#selected-team-name-input").val(""),$("#selected-team-contact-input").val(""),$(".team--selected").removeClass("team--selected"),$("body").removeClass("no-scroll"))}),$(document).ready(function(){$("#open-add-theme-modal-button").click(function(){$("#themeModal .modal__title").text("Add a theme"),$("#add-theme-submit-button").show(),$("#edit-theme-submit-button").hide(),$("#themeModal").show(),$("#selected-theme-name-input").val(""),$("#selected-theme-description-input").val(""),$("body").addClass("no-scroll"),findInsiders($("#themeModal")),event.preventDefault()}),$("#edit-theme-submit-button").click(function(){$(".theme--selected .theme-name-text").html($("#selected-theme-name-input").val()),$(".theme--selected .theme-name-input").val($("#selected-theme-name-input").val()),$(".theme--selected .theme-description-input").val($("#selected-theme-description-input").val()),$("#selected-theme-name-input").val(""),$("#selected-theme-description-input").val(""),$(".theme--selected").removeClass("theme--selected"),$("#themeModal").hide(),$("body").removeClass("no-scroll"),event.preventDefault()}),$("#close-add-theme-modal-button, .themeModalClose").click(function(){$("#themeModal").hide(),$("#selected-theme-name-input").val(""),$("#selected-theme-description-input").val(""),$(".theme--selected").removeClass("theme--selected"),$("body").removeClass("no-scroll"),event.preventDefault()}),$(document).mouseup(function(e){const t=$("#themeModal");t.is(":visible")&&t.is(e.target)&&0===t.has(e.target).length&&(t.hide(),$("#selected-theme-name-input").val(""),$("#selected-theme-description-input").val(""),$(".theme--selected").removeClass("theme--selected"),$("body").removeClass("no-scroll"))})})});